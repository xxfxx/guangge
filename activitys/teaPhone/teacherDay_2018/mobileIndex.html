<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>教师节</title>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'/>
<meta http-equiv="Cache-Control" content="no-siteapp, no-cache, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="Wed, 20 Jun 2007 22:33:00 GMT">
<link rel="stylesheet" href="css/swiper.min.css">
<link rel="stylesheet" href="css/animate.min.css">
<script src="js/swiper.min.js"></script>
<script src="js/swiper.animate.min.js"></script>
<script src="./js/config.js"></script>
<script src="../../../static/js/zepto.min.js"></script>
<script src="../../../config/config.js"></script>
<script src="../../../static/js/common.js"></script>
<!--<script src="//cdn.jsdelivr.net/npm/eruda"></script>-->
<!--<script>eruda.init()</script>-->
    

<link rel="stylesheet" href="css/indexMoblie.css">
</head>
<body>
<div class="swiper-container" id="teacher-container">
    <div class="swiper-wrapper">
        <!--slide1-->
        <section class="swiper-slide section2 slide1">
            <img src="images/moblie/bg1_moon.png" class="ani resize moon-img" swiper-animate-effect="fadeInLeft" swiper-animate-duration="0.5s" swiper-animate-delay="1s">
            <img src="images/moblie/bg1-01.png" class="ani resize slide1-img" swiper-animate-effect="fadeInLeft" swiper-animate-duration="0.5s" swiper-animate-delay="1s">
        </section>
        <!--slide2-->
        <section class="swiper-slide section2 with_data">
            <img src="images/moblie/bg1_moon.png" class="ani resize moon-img" swiper-animate-effect="fadeInLeft" swiper-animate-duration="0.5s" swiper-animate-delay="1s">
            <img src="images/moblie/bg2-01.png" class="ani resize slide2-img" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.5s" swiper-animate-delay="0s">
            <div class="ani resize text-box " swiper-animate-effect="fadeInLeft" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s">
                <p id="regDate" class="title">
                    2016年3月3日
                </p>
                <p>
                    初来乍到的你加入了海风教育这个大家庭
                </p>
                <p>
                    海风8年，你伴随了他 <span id="hfYear" class="title">2.5 </span>年的成长
                </p>
                <p>
                    这些年里，有欢笑，也有泪水，但和海风相互陪伴，已经成了习惯。
                </p>
 
                <p style="margin-top: 10px;">
                    这是您在海风的第 <span id="tfYear" class="title">3 </span>个教师节，在这个特殊的日子里，海风学员也送上了他们最真挚的祝福！让我们一起来看一下吧~
                </p>
            </div>
            <img src="images/moblie/bg2-02.png" class="ani resize slide2-img03" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.5s" swiper-animate-delay="0s" onclick="playVid()">
        </section>
        <!--slide2-->
        <!--slide3-->
        <section class="swiper-slide section3 with_data">
            <div class="ani resize timeline-box" swiper-animate-effect="fadeInLeft" swiper-animate-duration="0.5s" swiper-animate-delay="0s">
                <h3 class="slide-title section3-title ">最初的记忆</h3>
                <ul class="timeline resize">
                    <li class="timeline-item">
                    <i class="timeline-axis"></i>
                    <div class="timeline-content text">
                        <h3 class="timeline-title">2016年3月3日</h3>
                        <p>
                              您在海风上了第一堂试听课，虽然之后你也接了
                            <span class="time">12</span>节试听课，但对第一位 <span class="time">王山山 </span>同学，应该还记忆犹新吧
                        </p>
                    </div>
                    </li>
                    <li class="timeline-item">
                    <i class="timeline-axis"></i>
                    <div class="timeline-content text">
                        <h3 class="timeline-title">2016年3月4日</h3>
                        <p>
                            您在海风上了第一堂正式课，之后您愈战愈勇，已经连续完成了
                            <span id="formalTotal" class="time"> 30</span> 节正式课程
                        </p>
                    </div>
                    </li>
                    <li class="timeline-item">
                    <i class="timeline-axis"></i>
                    <div class="timeline-content text">
                        <h3 class="timeline-title">2016年3月5日</h3>
                        <p>
                          您第一次使用了课堂鼓励道具，还记得
                            <span id="firstPropstudent" class="time"> 王山山</span> 同学看到鼓励道具时开心的表情吗
                        </p>
                    </div>
                    </li>
                </ul>
            </div>
            <img src="images/moblie/bg3-01.png" class="ani resize slide3-img01" swiper-animate-effect="fadeInUp" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s">

        </section>
        <!--slide4-->
        <section class="swiper-slide section4 withData with_data">
            <div class="ani resize slide4-img" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.5s" swiper-animate-delay="0s">
                <h3 class="slide-title">桃李满天下</h3>
                <p class="text">
                    <span id="section4_year" class="time">2.5 </span>年里<br>
                                您教过的学生已经有
                    <span id="section4_people" class="time">20 </span>人<br>
                                遍布了
                    <span id="section4_province" class="time"> 18 </span>个省份
                </p>
            </div>
             <img src="images/moblie/bg4-02.png" class="ani resize slide4-img01" swiper-animate-effect="fadeInUp" swiper-animate-duration="0.5s" swiper-animate-delay="0.3s">
            <div id="mapImage">
                <img src="images/moblie/bg4-01.png" class="ani resize map-img" swiper-animate-effect="fadeIn" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s">
            </div>
        </section>
        <!--slide5-->
        <!--slide5-->
        <section class="swiper-slide section5 with_data">
            <div class="ani resize slide4-img" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.5s" swiper-animate-delay="0s">
                <h3 class="slide-title">感谢有你</h3>
            </div>
            <div class="ani resize slide5" swiper-animate-effect="fadeInLeft" swiper-animate-duration="0.5s" swiper-animate-delay="1s">
                <div class="section5-box">
                    <ul class="list text">
                        <li id="totalPropNum">
                        <p>
                            您在海风为学生们送上了<span class="time"> 999 </span>次鼓励让他们变得更加自信
                        </p>
                        </li>
                        <li id="usedQuiz">
                        <p>
                            您准备的 <span class="time"> 999 </span>份课件，让孩子们掌握了更多的知识
                        </p>
                        </li>
                        <li id="correctHomeWork">
                        <p>
                            认真负责的您,在授课期间还批改了 <span class="time"> 999 </span>份作业
                        </p>
                        </li>
                    </ul>
                    <div class="section5-footer-box">
                        <h3 id="maxLessonCountDay" class="slide-title section4-title">2017年8月1日</h3>
                        <p class="text">
                              您连续工作上了<span id="maxLessonCount" class="time">20 </span>节课程，您的辛苦都将成为学生们永远的记忆。<br>
                            <br>
                              在今天这个特殊的日子里，您的
                            <span id="blessingCount" class="time"> ? </span>个学生也向您送来了特别的祝福哦~
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <!--slide6-->
        <section class="swiper-slide section6 with_data">
            <div class="ani resize slide4-img" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.5s" swiper-animate-delay="0s">
                <h3 class="slide-title">学生的祝福</h3>
            </div>
            <div class="ani resize slide6" swiper-animate-effect="fadeInLeft" swiper-animate-duration="0.5s" swiper-animate-delay="1s">
                <!-- Swiper -->
                <!-- Swiper -->
                <div class="swiper-container" id="banner">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <div class="section6-box" style="margin-left: 3%;">
                                <div class="media-box">
                                    <div class="media-box-hd">
                                        <img src="images/icon_hd.png" alt="">
                                    </div>
                                    <div class="media-box-bd">
                                        <h4 class="media-box-title">王山山  2016届毕业生</h4>
                                        <p class="media-box-desc">
                                            您说您是蜿蜒流淌的小溪，而我是您怀中的小龙鱼
                                        </p>
                                    </div>
                                </div>
                                <div class="media-box">
                                    <div class="media-box-hd">
                                        <img src="images/icon_hd.png" alt="">
                                    </div>
                                    <div class="media-box-bd">
                                        <h4 class="media-box-title">王山山  2016届毕业生</h4>
                                        <p class="media-box-desc">
                                            您说您是蜿蜒流淌的小溪，而我是您怀中的小龙鱼
                                        </p>
                                    </div>
                                </div>
                                <div class="media-box">
                                    <div class="media-box-hd">
                                        <img src="images/icon_hd.png" alt="">
                                    </div>
                                    <div class="media-box-bd">
                                        <h4 class="media-box-title">王山山  2016届毕业生</h4>
                                        <p class="media-box-desc">
                                            您说您是蜿蜒流淌的小溪，而我是您怀中的小龙鱼
                                        </p>
                                    </div>
                                </div>
                                <div class="media-box">
                                    <div class="media-box-hd">
                                        <img src="images/icon_hd.png" alt="">
                                    </div>
                                    <div class="media-box-bd">
                                        <h4 class="media-box-title">王山山  2016届毕业生</h4>
                                        <p class="media-box-desc">
                                            您说您是蜿蜒流淌的小溪，而我是您怀中的小龙鱼
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="mapImage">
                            <img src="images/moblie/bg6-04.png" class="ani resize fadeInDown slide6-img4" swiper-animate-effect="fadeIn" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s">
                        </div>
                    </div>
                    <!-- 如果需要分页器 -->
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            <img src="images/moblie/bg6-02.png" class="ani resize fadeInLeft slide6-img2" swiper-animate-effect="fadeIn" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s">
            <img src="images/moblie/bg6-03.png" class="ani resize fadeInRight slide6-img3" swiper-animate-effect="fadeIn" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s">
        </section>
        <!--slide7-->
        <section class="swiper-slide section7 slide1 with_data">
            <div class="ani resize slide7-img" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.5s" swiper-animate-delay="0s">
                <p class="text">
                         2018年教师节
                    <br/>
                    <span id="teacherName" class="time">吴雪松</span>老师在海风教育，收到了<span id="number_blessing" class="time">20</span>份学生祝福
                </p>
            </div>
            <div class="ani resize slide7" swiper-animate-effect="fadeInLeft" swiper-animate-duration="0.5s" swiper-animate-delay="1s">
                <div class="section7-box resize">
                    <div class="media-box resize">
                        <div class="media-box-hd">
                            <img src="images/icon_hd.png" alt="">
                        </div>
                        <div class="media-box-bd">
                            <h4 class="media-box-title">王山山  2016届毕业生</h4>
                            <p class="media-box-desc">
                                您说您是蜿蜒流淌的小溪，而我是您怀中的小龙鱼
                            </p>
                        </div>
                    </div>
                    <div class="media-box resize">
                        <div class="media-box-hd">
                            <img src="images/icon_hd.png" alt="">
                        </div>
                        <div class="media-box-bd">
                            <h4 class="media-box-title">王山山  2016届毕业生</h4>
                            <p class="media-box-desc">
                                您说您是蜿蜒流淌的小溪，而我是您怀中的小龙鱼
                            </p>
                        </div>
                    </div>
                    <div class="media-box resize">
                        <div class="media-box-hd">
                            <img src="images/icon_hd.png" alt="">
                        </div>
                        <div class="media-box-bd">
                            <h4 class="media-box-title">王山山  2016届毕业生</h4>
                            <p class="media-box-desc">
                                您说您是蜿蜒流淌的小溪，而我是您怀中的小龙鱼
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="btn-box ani resize fadeInRight">
                <a  id="repeatBtn" class="btn">再看一遍</a>
                <a id="shareButton" class="btn btn-org">分享喜悦</a>
            </div>
        </section>

           <!--slide8-->
        <section class="swiper-slide no_user">
            <div class="video-box">
                <img src="images/moblie/video_img.png" alt=""  class="video-bg resizes" onclick="playVid()"/>
            </div>
            <div class="text-box video-text-box resize">
                <p>
                2018年教师节<br />

                海风教育开展了<br />
               <span class="title">“感恩教师节 爱要大声说出来”</span>活动<br />
                共计收到了  <span class="title">3579 </span>名学生<br />

                为老师送上的  <span class="title">23456 </span>次祝福<br /><br />

                在这个特殊的日子里<br />

                海风学员还通过视频的方式<br />

                送上了他们最真挚的祝福！<br />

                让我们一起来看一下吧~</p>
            </div>
            <img src="images/moblie/wave.png" alt="" class="wave-bg resizes" />
        </section>
        <!--slide9-->
        <section class="swiper-slide video-box-slide2 resize no_user">
           <h3>加入海风<br />
            一起续写和学生们的故事 </h3>
          <a href="http://t.cn/RrnDduh" class="btn resize video-box-btn">立即加入</a>
              <img src="images/moblie/wave.png" alt="" class="wave-bg resizes" />
        </section>
        <!--slide2-->
    </div>
    <img src="images/moblie/web-swipe-tip.png" id="array" class="resize swipe-tip">
    <div class="swiper-pagination">  </div>
  
</div>
   <!-- 弹窗 -->
<div  class="video-modal-mask" id="videoModalMask">
    <div  class="close" onclick="pauseVid()"></div>
    <div class="modal-container">    
        <div class="modal-body">
          <video id='videoBox'
            style="width: 102.2%; height: 569px; margin-top: -1px; margin-left: -1.1%; margin-right: -1.1%;" id="video"><p> 不支持video</p> </video>
        </div>
    </div>
</div>
<div id="net_err" class="swiper-container no-network-container">
    <div class="swiper-wrapper">
        <!--slide1-->
        <section class="swiper-slide ">
        <img src="images/moblie/invalid_name.png" alt="" style="width: 65%;"/>
        <p>
            网络出问题了！
        </p>
        <a id="reloadBtn" class="btn">重新加载</a>
        </section>
    </div>
</div>
<div id="noData" class="swiper-container no-data-container">
    <div class="swiper-wrapper">
        <!--slide1-->
        <section class="swiper-slide ">
            <img src="images/moblie/image_404.png" alt="" />
            <p>你似乎来到了没有知识存在的海洋</p>
        </section>
    </div>
</div>
<script>  
scaleW=window.innerWidth/320;
scaleH=window.innerHeight/480;
var resizes = document.querySelectorAll('.resize');
  for (var j=0; j<resizes.length; j++) {
   resizes[j].style.width=parseInt(resizes[j].style.width)*scaleW+'px';
   resizes[j].style.height=parseInt(resizes[j].style.height)*scaleH+'px';
   resizes[j].style.top=parseInt(resizes[j].style.top)*scaleH+'px';
   resizes[j].style.left=parseInt(resizes[j].style.left)*scaleW+'px'; 
  }
var scales = document.querySelectorAll('.txt');
for (var i=0; i<scales.length; i++) {
    ss=scales[i].style;
    ss.webkitTransform = ss.MsTransform = ss.msTransform = ss.MozTransform = ss.OTransform =ss.transform='translateX('+scales[i].offsetWidth*(scaleW-1)/2+'px) translateY('+scales[i].offsetHeight*(scaleH-1)/2+'px)scaleX('+scaleW+') scaleY('+scaleH+') ';
}
var mySwiper = new Swiper ('#teacher-container', {
    direction : 'vertical',
    pagination: {
       el:'.swiper-pagination',
    },
    resistanceRatio: false,
    mousewheel: true,
    onInit: function(swiper){ //Swiper2.x的初始化是onFirstInit
      swiperAnimateCache(swiper); //隐藏动画元素 
      swiperAnimate(swiper); //初始化完成开始动画
    }, 
    onSlideChangeEnd: function(swiper){
      console.log(swiper.activeIndex)
      if(swiper.activeIndex==6){
        $('#array').hide()
      }else {
        $('#array').show()
      }
      swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
    },
    observer:true
})    

  </script>
</body>
</html>

<!-- 视屏 -->

<script>
  var userId = getHtmlParam('userId')
  var TeacherNerStatus = true
  var mapNetStatus = true
  var TeacherInfoLoading = false
  $(function init () {
    console.log(userId)
    $('#noData').hide()
    $('#net_err').hide()
    if (userId && userId > 0) {
      TeacherInfoLoading = true
      getTeacherInformation(userId)
      ShareClink(userId)
      reloadClink(userId)
      repeatBtn(userId)
      $('.no_user').remove()
    } else {
      $('.with_data').remove()
    }
  })
  /*
* 判断是否显示试听课
* trialTotal: 试听课总数
*formalTotal: 正式总数
* firstTrialDay: 第一次试听时间
* firstFormalDay: 第一次正式课时间
* regDate: 教师第一次注册授课系统时间
* hfYear: 陪伴海风的年数
* tfYear: 教师节年数
*/
  function getTeacherInformation(userId) {
    $.ajax({
      type: 'POST',
      dataType: 'json',
      crossDomain: true,
      url: XUE_DOMAIN + APIS.getTeacherInformation,
      data: {
        userId: userId,
      },
      success: function (res) {
        if(res.code==200){
          $('#teacher-container').show()
          var data = res.data
          console.log('data:'+data)
          var  btime = timestampToData(data.regDate)
          $('#regDate').text(btime)
          $('#hfYear').text(data.hfYear)
          $('#tfYear').text(data.tfYear)
          pageThreeIsShow(data)
          pageFourLoad(data)
          pageFifthLoad(data)
          pageSixedLoad(data)
          pageSeventhLoad(data)
          getMapUrl(userId)
        }else {
          $('#teacher-container').hide()
          $('#net_err').hide()
          $('#noData').show()
        }
        var swiper = new Swiper('#banner', {
        });
      },
      error: function () {
        TeacherInfoLoading = false
        TeacherNerStatus = false
        showNetErr(true)
      }
    })
  }
  var shareUrl = null
  function getMapUrl(userId) {
    var shareLink = PROJECT_DOMAIN+'/activitys/teaPhone/teacherDay_2018/form_pc_share.html'

    $.ajax({
      type: 'POST',
      dataType: 'json',
      crossDomain: true,
      url: AUDIT_DOMAIN + APIS.getMapUrl ,
      data: {
        userId: userId,
        redirect: shareLink
      },
      success: function (res) {
        TeacherInfoLoading = false
        var data = res.data
        console.log('data:'+data)
        var img = $('<img />',{src: data.map, class: "ani resize map-img" })
        shareUrl = data.share
        $('#mapImage').html(img)
      },
      error: function (err) {
        mapNetStatus = false
        console.log(err)
        showNetErr(true)
      }
    })
  }
  function showLoading() {

  }
  function  showNetErr(isShow) {
    if(isShow){
      $('#net_err').show()
      $('#noData').hide()
      $('#teacher-container').hide()
    }else {

    }
  }
  function pageThreeIsShow(data) {
    //如果试听课时小于30
    var isAttempt = !data.firstTrialDay||data.trialTotal<30
    var isAfficial =!data.firstFormalDay
    var isUsedroperty = !data.firstPropDate
    console.log("是否隐藏试听"+isAttempt)
    console.log("是否隐藏正课"+isAfficial)
    console.log("是否隐藏道具"+isUsedroperty)
    if (isAttempt) {
      console.log("隐藏试听课")
      $($('.section3 li')[0]).hide()
    }else {
      var firstTrialDay_C =  timestampToData(data.firstTrialDay)
      $($('.section3 li h3')[0]).text(firstTrialDay_C)
      $($('.section3 li span')[0]).text(data.trialTotal)
      $($('.section3 li span')[1]).text(data.firstPropstudent)
    }
    //如果正式课
    if(isAfficial) {
      console.log("隐藏正课")
      $($('.section3 li')[1]).hide()
    }else {
      var firstFormalDay_C =  timestampToData(data.firstFormalDay)
      console.log('****'+firstFormalDay_C)
      $($('.section3 li h3')[1]).text(firstFormalDay_C)
      $('#formalTotal').text(data.formalTotal)
    }
    //如果没送过道具
    if(isUsedroperty) {
      console.log("隐藏第一道具")
      $($('.section3 li')[2]).hide()
    }else {
      var firstPropDate_C =  timestampToData(data.firstPropDate)
      $($('.section3 li h3')[2]).text(firstPropDate_C)
      $('#firstPropstudent').text(data.firstPropstudent)
    }
    if(isAttempt&&isAfficial&&isUsedroperty) {
      console.log("隐藏当前页")
      $('.section3').remove()
    }
  }
  function pageFourLoad (data) {
    if(data.teachedStudent==0||!data.teachedStudent) {
      console.log("隐藏当前页")
      $('.section4').remove()
    }else {
      $('#section4_year').text(data.hfYear)
      $('#section4_people').text(data.teachedStudent)
      $('#section4_province').text(data.teachedStudentProviceCount)
    }
  }
  /*
  *totalPropNum   老师鼓励次数
  * usedQuiz  老师课件数目
  * correctHomeWork 作业数目
  * maxLessonCountDay 上课最多课程数日期
  *  maxLessonCount  一天上课最多课程数
  *
  */
  function pageFifthLoad(data) {
    if(data.totalPropNum<10){
      $('#totalPropNum').html("<p>您在海风为学生们送上的多次鼓励让他们变得更加自信</p>")
    }else {
      $('#totalPropNum span').text(data.totalPropNum)
    }
    if(data.usedQuiz<30){
      $('#usedQuiz').html("<p>您准备的课件，让孩子们掌握了更多的知识</p>")
    }else {
      $('#usedQuiz span').text(data.usedQuiz)
    }
    if(data.correctHomeWork<30){
      $('#correctHomeWork').html("<p>认真负责的您，在授课期间还批改了大量作业</p>")
    }else {
      $('#correctHomeWork span').text(data.correctHomeWork)
    }
    if(data.maxLessonCountDay==0||!data.maxLessonCountDay){
      $('.section5-footer-box').hide()
    }else {
      $('#maxLessonCountDay').text(timestampToData(data.maxLessonCountDay))
      $('#maxLessonCount').text(data.maxLessonCount)
      $('#blessingCount').text(data.list.length)
    }
  }
  function renderStudentSwiper (list) {
    $('.section6 .swiper-wrapper').empty()
    console.log('renderStudentSwiper=>list')
    console.log(list)
//    list.sort(function (a, b) {
//      return a.firstLessonPlanTime < b.firstLessonPlanTime
//    })
    list.map(function (item, index) {
      var box = $('<div />',{class: 'swiper-slide'})
      var box_1 = $('<div />',{class: 'section6-box' })
      box.append(box_1)
      $('.section6 .swiper-wrapper').append(box)
      renderStudentRow(item,box_1)
    })
    /**
     *    <div id="mapImage">
     <img src="images/moblie/bg6-04.png" class="ani resize fadeInDown slide6-img4" swiper-animate-effect="fadeIn" swiper-animate-duration="0.5s" swiper-animate-delay="0.5s">
     </div>
     */
    $('.section6 .swiper-wrapper').append("<div id=\"mapImage\">\n" +
      "     <img src=\"images/moblie/bg6-04.png\" class=\"ani resize fadeInDown slide6-img4\" swiper-animate-effect=\"fadeIn\" swiper-animate-duration=\"0.5s\" swiper-animate-delay=\"0.5s\">\n" +
      "     </div>")

  }
  function renderStudentRow (list,BoxItem) {
    list.map(function (item) {
      var title_student  = nameFix(item.studentName) + "     " + YearFix(item.firstLessonPlanTime)
      var div = $('<div />',{class: 'media-box'})
      var div_1 = $('<div />',{class: 'media-box-hd' })
      var img = $('<img/>', {src:"images/icon_hd.png",art:'' })
      div_1.append(img)
      div.append(div_1)
      var div_2 =  $('<div />',{class: 'media-box-bd' })
      var h4 = $('<h4/>', {class: 'media-box-title', text: title_student})
      var p = $('<p/>', {class: 'media-box-desc', text: cutString(item.greetings,36)})
      div_2.append(h4,p)
      div.append(div_2)
      $(BoxItem).append(div)
    })
  }
  function pageSixedLoad(data) {
     var dataList = data.list
        dataList.sort(function (a, b) {
        return a.firstLessonPlanTime < b.firstLessonPlanTime
      })
    console.log('没有排序之前')
    console.log(dataList)
    renderStudentSwiper(splitArry(dataList,4))
  }
  function pageSeventhLoad(data) {
    $('#teacherName').text(data.teacherName)
    $('#number_blessing').text(data.list.length)
    var lastPageData =data.list.slice(0,3)
    lastPageData.map(function (item,index) {
      var title_student_7  = nameFix(item.studentName ) + "     " + YearFix(item.firstLessonPlanTime)
      $($('.section7-box .media-box-title')[index]).text(title_student_7)
      $($('.section7-box p')[index]).text(cutString(item.greetings,36))
    })
  }
  function timestampToData(timestamp) {
    var date = new Date(timestamp) //获取一个时间对象
    var year = date.getFullYear()// 获取完整的年份(4位,1970)
    var month = date.getMonth() +1 // 获取月份(0-11,0代表1月,用的时候记得加上1)
    var day = date.getDate()// 获取日(1-31)
    date.getTime() // 获取时间(从1970.1.1开始的毫秒数)
    date.getHours()// 获取小时数(0-23)
    date.getMinutes() // 获取分钟数(0-59)
    date.getSeconds() // 获取秒数(0-59)
    var  result = year + '年' + month + '月' + day +'日'
    return result
  }
  function splitArry(arr,len) {
    console.log('原始数据:')
    console.log(arr)
    var allData = []; //用来装处理完的数组
    var currData = []; //子数组用来存分割完的数据
    //循环需要处理的数组
    for(var i = 0; i < arr.length; i++) {
      //将chartArr[i]添加到子数组
      currData.push(arr[i]);
      console.log(i)
      //在这里求4的余数,如果i不等于0,且可以整除 或者考虑到不满4个或等于4个的情况就要加上  i等于当前数组长度-1的时候
      if((i != 0 && (i + 1) % 4 == 0) || i == arr.length - 1) {
        //把currData加到allData里
        console.log('i=',i)
        console.log(currData)
        allData.push(currData);
        //在这里清空currData
        currData = [];
      }
    };

     console.log('allData:')
     console.log(allData)
    //alert(newArr[0].greetings)
    return allData
  }
  function cutString(str, len) {
    if(!str) return ''
    //length属性读出来的汉字长度为1
    if(str.length <= len) {
      return str;
    }else {
      return (str.substring(0,len-1) + "...");
    }
  }
  function nameFix(name) {
    if(name=='海风学子') return "海风学子"
    if(name.length<4){
      return (name.substring(0,1) + "同学");
    }else {
      return (name.substring(0,2) + "同学");
    }
  }
  function YearFix(timestamp) {
    if(!timestamp) return ''
    var date_y= new Date(timestamp) //获取一个时间对象
    var year_m = date_y.getFullYear()// 获取完整的年份(4位,1970)
    var  result = year_m + '级'
    return result
  }
  function ShareClink(userId) {
    $('.btn-org').on('click',function () {
      var parms = {
        shareImage : shareUrl,
      }
      var json  =  JSON.stringify(parms)
      console.log(json)
      WebViewBridge.send(json)
    })
  }
  function reloadClink(userId) {
    $('#reloadBtn').on('click',function () {
      getTeacherInformation(userId)
     // getMapUrl(userId)
    })
  }
  function repeatBtn() {
    $('#repeatBtn').on('click',function () {
     mySwiper.slideTo(0)
    })
  }
</script>
  <script type="text/javascript">
    var videoBox = document.getElementById("videoBox");
    var url = APP_DOWNLOAD_DOMAIN + '/teaPhone/videos/test-1.mp4';
    videoBox.src = url;
    var videoModalMask = document.getElementById('videoModalMask')
    function pauseVid () {
      videoBox.pause();
      videoBox.webkitExitFullScreen()
      videoModalMask.style.display = "none"
      $('#videoModalMask').remove()

    }
    function playVid(){
      var dom = "<div  class='video-modal-mask' id='videoModalMask'><div  class='close' onclick='pauseVid()'></div><div class='modal-container'> <div class='modal-body'><video id='videoBox' src='" + url + "' style='width: 102.2%; height: 569px; margin-top: -1px; margin-left: -1.1%; margin-right: -1.1%;' id='video'><p> 不支持video</p> </video></div> </div></div>"
      if(!videoBox){
        $('body').append(dom)
      }
      var videoBox = document.getElementById("videoBox");
    var videoModalMask = document.getElementById('videoModalMask')
      videoModalMask.style.display = "block"
      // videoBox.webkitEnterFullscreen()
      videoBox.play();

    }
</script>